<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CMG Consultoria - Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #6A5ACD;
            --primary-light: #F0EFFF;
            --background-color: #f9fafb;
            --sidebar-bg: #ffffff;
            --card-bg: #ffffff;
            --text-dark: #1f2937;
            --text-light: #6b7280;
            --border-color: #e5e7eb;
            --shadow-color: rgba(100, 100, 150, 0.1);
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Poppins', sans-serif; background-color: var(--background-color); color: var(--text-dark); }
        #login-screen { display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 20px; }
        #login-container { background: var(--card-bg); padding: 40px; border-radius: 16px; box-shadow: 0 8px 30px var(--shadow-color); width: 100%; max-width: 450px; text-align: center; }
        .company-logo { max-width: 120px; margin-bottom: 20px; }
        h1 { font-size: 24px; font-weight: 600; margin-bottom: 8px; }
        #login-container p { color: var(--text-light); margin-bottom: 25px; }
        .input-field { width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 16px; transition: all 0.3s; }
        .input-field:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px var(--primary-light); }
        .input-wrapper { display: flex; flex-direction: column; gap: 15px; margin-bottom: 20px; }
        .action-button { width: 100%; padding: 12px 25px; border: none; background: var(--primary-color); color: white; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: 500; transition: background-color 0.3s; }
        .action-button:hover { background: #5849b0; }
        #error-message { color: var(--danger-color); font-size: 14px; height: 20px; margin-top: 10px; }
        #app-layout { display: none; grid-template-columns: 260px 1fr; min-height: 100vh; }
        .sidebar { background-color: var(--sidebar-bg); padding: 24px; border-right: 1px solid var(--border-color); display: flex; flex-direction: column; }
        .sidebar-header { margin-bottom: 30px; }
        .sidebar-header .company-logo { max-width: 50px; }
        .sidebar nav { flex-grow: 1; }
        .sidebar ul { list-style: none; }
        .sidebar li a { display: flex; align-items: center; gap: 12px; padding: 12px 16px; border-radius: 8px; text-decoration: none; color: var(--text-light); font-weight: 500; margin-bottom: 8px; transition: all 0.3s; }
        .sidebar li a svg { width: 20px; height: 20px; stroke: var(--text-light); transition: all 0.3s; }
        .sidebar li a:hover { background-color: var(--primary-light); color: var(--primary-color); }
        .sidebar li a:hover svg { stroke: var(--primary-color); }
        .sidebar li a.active { background-color: var(--primary-color); color: white; }
        .sidebar li a.active svg { stroke: white; }
        .sidebar-footer { margin-top: auto; padding-top: 20px; border-top: 1px solid var(--border-color); }
        .logout-button { background: none; border: none; cursor: pointer; display: inline-flex; align-items: center; gap: 12px; padding: 10px; border-radius: 8px; font-family: 'Poppins', sans-serif; font-size: 15px; font-weight: 500; color: var(--text-light); transition: all 0.3s; }
        .logout-button:hover { background-color: #fee2e2; color: var(--danger-color); }
        .logout-button:hover svg { stroke: var(--danger-color); }
        .main-content { background-color: var(--background-color); padding: 24px 32px; overflow-y: auto; }
        .main-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; flex-wrap: wrap; gap: 16px; }
        .main-header h1 { font-size: 28px; }
        .user-profile { display: flex; align-items: center; gap: 12px; }
        .user-profile img { width: 40px; height: 40px; border-radius: 50%; }
        .user-profile span { font-weight: 600; }
        .summary-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 24px; margin-bottom: 32px; }
        .summary-card { background-color: var(--card-bg); padding: 20px; border-radius: 12px; box-shadow: 0 4px 12px var(--shadow-color); display: flex; align-items: flex-start; gap: 16px; }
        .summary-card .icon { width: 48px; height: 48px; border-radius: 8px; display: flex; justify-content: center; align-items: center; flex-shrink: 0; }
        .summary-card .icon svg { width: 24px; height: 24px; }
        .summary-card .text { overflow: hidden; }
        .summary-card:nth-child(1) .icon { background-color: #dbeafe; color: #3b82f6; }
        .summary-card:nth-child(2) .icon { background-color: #fef3c7; color: #f59e0b; }
        .summary-card:nth-child(3) .icon { background-color: #fee2e2; color: #ef4444; }
        .summary-card:nth-child(4) .icon { background-color: #d1fae5; color: #10b981; }
        .summary-card .text h3 { font-size: 14px; color: var(--text-light); margin-bottom: 4px; font-weight: 500; white-space: nowrap; }
        .summary-card .text p { font-size: 20px; font-weight: 600; text-overflow: ellipsis; white-space: nowrap; overflow: hidden; }
        .dashboard-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 24px; }
        .dashboard-card { background-color: var(--card-bg); padding: 24px; border-radius: 12px; box-shadow: 0 4px 12px var(--shadow-color); }
        .dashboard-card h2 { font-size: 18px; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 1px solid var(--border-color); }
        .timeline { display: flex; justify-content: space-between; position: relative; margin-bottom: 20px; padding-top: 10px; }
        .timeline::before { content: ''; position: absolute; top: 35px; left: 15%; right: 15%; height: 4px; background-color: #e5e7eb; z-index: 1; }
        #progress-bar { position: absolute; top: 35px; left: 15%; height: 4px; background-color: var(--primary-color); width: 0%; z-index: 2; transition: width 0.5s ease-in-out; }
        .step { display: flex; flex-direction: column; align-items: center; position: relative; z-index: 3; text-align: center; width: 100px; }
        .step-icon { width: 50px; height: 50px; border-radius: 50%; background-color: #ccc; color: white; display: flex; justify-content: center; align-items: center; font-size: 24px; font-weight: bold; margin-bottom: 10px; border: 4px solid var(--card-bg); transition: background-color 0.3s; }
        .step-icon.active { background-color: var(--primary-color); }
        .step-icon.completed { background-color: var(--success-color); }
        .step-text { font-size: 13px; color: #6b7280; font-weight: 500; }
        #status-message { margin-top: 20px; padding: 15px; background-color: #F0EFFF; border: 1px solid #dcd5f8; border-radius: 8px; color: #6A5ACD; font-size: 15px; font-weight: 500; }
        .payments-table { width: 100%; border-collapse: collapse; }
        .payments-table th, .payments-table td { padding: 10px; text-align: left; border-bottom: 1px solid var(--border-color); }
        .regularizar-btn { background-color: var(--warning-color); color: var(--text-dark); border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 14px; }
        #materiais-list { list-style: none; padding: 0; }
        #materiais-list li { margin-bottom: 10px; }
        #materiais-list a { text-decoration: none; color: var(--primary-color); font-weight: 500; }
        .plans-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 24px; }
        .plan-card { background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 12px; padding: 32px; text-align: center; display: flex; flex-direction: column; position: relative; }
        .plan-card.popular { border: 2px solid var(--primary-color); }
        .plan-badge { position: absolute; top: -14px; left: 50%; transform: translateX(-50%); background: var(--primary-color); color: white; padding: 4px 12px; border-radius: 16px; font-size: 12px; font-weight: 600; }
        .plan-card h3 { font-size: 22px; margin-bottom: 8px; }
        .plan-card .description { color: var(--text-light); margin-bottom: 24px; min-height: 40px; }
        .plan-price { margin-bottom: 24px; }
        .plan-price .amount { font-size: 48px; font-weight: 700; }
        .plan-features { list-style: none; text-align: left; margin-bottom: 32px; flex-grow: 1; }
        .plan-features li { margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
        .plan-features li svg { width: 20px; height: 20px; color: var(--success-color); flex-shrink: 0; }
        .plan-button { padding: 12px; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s; }
        .plan-button.primary { background: var(--primary-color); color: white; border: 2px solid var(--primary-color); }
        .plan-button.secondary { background: white; color: var(--primary-color); border: 2px solid var(--primary-color); }
        .plan-button:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .modal { display: none; position: fixed; z-index: 1001; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.6); align-items: center; justify-content: center; }
        .modal-content { background-color: #fefefe; padding: 20px 30px; border: 1px solid #888; width: 90%; max-width: 400px; border-radius: 12px; text-align: center; position: relative; }
        .close-btn { color: #aaa; position: absolute; top: 10px; right: 20px; font-size: 28px; font-weight: bold; cursor: pointer; }
        #qr-code-img { max-width: 250px; margin: 20px auto; display: block; }
        #pix-copy-paste { width: 100%; padding: 8px; margin-top: 10px; box-sizing: border-box; border: 1px solid var(--border-color); border-radius: 6px; background-color: #f0f2f5; font-size: 12px; text-align: center; }
        @media (max-width: 1024px) { .dashboard-grid { grid-template-columns: 1fr; } }
        @media (max-width: 768px) { #app-layout { grid-template-columns: 1fr; } .sidebar { display: none; } .main-content { padding: 16px; } .main-header h1 { font-size: 22px; } .plan-card { padding: 24px; } }
    </style>
</head>
<body>

    <div id="login-screen">
        <div id="login-container">
            <img src="img/Logo.png" alt="Logo" class="company-logo">
            <h1>Bem-vindo de volta!</h1>
            <p>Acesse sua área exclusiva para clientes.</p>
            <div class="input-wrapper">
                <input type="text" id="docInput" class="input-field" placeholder="Seu CPF ou CNPJ">
                <input type="password" id="passwordInput" class="input-field" placeholder="Sua senha">
            </div>
            <button id="loginButton" class="action-button">Entrar</button>
            <p id="error-message"></p>
        </div>
    </div>
    
    <div id="app-layout">
        <aside class="sidebar">
            <div class="sidebar-header"><img src="img/Logo.png" alt="Logo" class="company-logo"></div>
            <nav>
                <ul>
                    <li><a href="#" class="nav-link active" data-view="dashboard-view"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>Dashboard</a></li>
                    <li><a href="#" class="nav-link" data-view="plans-view"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>Planos e Assinatura</a></li>
                </ul>
            </nav>
            <div class="sidebar-footer">
                <button class="logout-button"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/></svg>Sair</button>
            </div>
        </aside>

        <main class="main-content">
            <header class="main-header">
                <h1 id="page-title">Dashboard</h1>
                <div class="user-profile">
                    <img src="https://i.pravatar.cc/150" alt="Avatar" id="user-avatar">
                    <span id="username-display"></span>
                </div>
            </header>

            <div id="dashboard-view" class="view-content">
                <section class="summary-cards"></section>
                <section class="dashboard-grid"></section>
            </div>

            <div id="plans-view" class="view-content" style="display: none;">
                 <div class="plans-container">
                    <div class="plan-card">
                        <h3>Essencial</h3>
                        <p class="description">Proteção para o seu CPF</p>
                        <div class="plan-price"><span class="currency">R$</span><span class="amount">14,90</span><span class="period">/mês</span></div>
                        <ul class="plan-features">
                            <li><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Monitoramento de CPF 24h com alertas</li>
                            <li><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Relatório de Score detalhado</li>
                            <li><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Acesso a ofertas exclusivas de negociação</li>
                            <li><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>1 Consulta CPF ou CNPJ</li>
                        </ul>
                        <button class="plan-button secondary">Começar com Essencial</button>
                    </div>
                    <div class="plan-card popular">
                        <div class="plan-badge">Mais Popular</div>
                        <h3>Plus</h3>
                        <p class="description">Sua saúde financeira completa</p>
                        <div class="plan-price"><span class="currency">R$</span><span class="amount">29,90</span><span class="period">/mês</span></div>
                        <ul class="plan-features">
                            <li><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Tudo do Plano Essencial, e mais:</li>
                            <li><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Plano de Ação para Aumentar Score</li>
                            <li><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Ferramenta de Orçamento Pessoal</li>
                            <li><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Canal de Atendimento Prioritário</li>
                            <li><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>2 Consultas CPF ou CNPJ</li>
                        </ul>
                        <button class="plan-button primary">Escolher Plano Plus</button>
                    </div>
                    <div class="plan-card">
                        <h3>Premium</h3>
                        <p class="description">Consultoria e suporte VIP</p>
                        <div class="plan-price"><span class="currency">R$</span><span class="amount">79,90</span><span class="period">/mês</span></div>
                        <ul class="plan-features">
                            <li><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Tudo do Plano Plus, e mais:</li>
                            <li><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Consultoria Financeira Pessoal (2x/mês)</li>
                            <li><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Assistente Pessoal para Negociação de Dívidas</li>
                            <li><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Relatório Financeiro Completo e Personalizado</li>
                            <li><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>4 Consultas CPF ou CNPJ</li>
                        </ul>
                        <button class="plan-button secondary">Assinar Premium</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div id="pix-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h3>Pagamento via PIX</h3>
            <p>Use o app do seu banco para ler o QR Code ou copie o código abaixo.</p>
            <img id="qr-code-img" src="" alt="QR Code PIX">
            <input type="text" id="pix-copy-paste" readonly>
            <p style="font-size: 12px; margin-top: 15px;">Chave: Contato.cobecode@gmail.com</p>
        </div>
    </div>

    <script>
        const clientDatabase = {
            "11122233344": { name: "CLIENTE TESTE PENDENTE", status: "EM TRANSIÇÃO DE ENVIO", pagamentos: [{ data: "10/08/2025", valor: 150.00, desc: "Taxa Inicial" }], pagamentoEmAberto: { valor: 75.50, desc: "Parcela 1/3", vencimento: "10/09/2025" }, materiais: [{ nome: "Guia de Boas-Vindas", url: "#" }, { nome: "Contrato", url: "#" }] },
            "22233344455": { name: "CLIENTE TESTE EM DIA", status: "LIMINAR CONCEDIDA", pagamentos: [{ data: "15/07/2025", valor: 150.00, desc: "Taxa Inicial" }], pagamentoEmAberto: null, materiais: [{ nome: "Guia Sobre Liminar", url: "#" }] },
            "44455566677": { name: "CLIENTE FINALIZADO", status: "PROCESSO FINALIZADO", pagamentos: [{ data: "01/01/2025", valor: 500.00, desc: "Pagamento Final" }], pagamentoEmAberto: null, materiais: [{ nome: "Certificado de Conclusão", url: "#" }] },
             "55566677788": { name: "Gustavo", status: "RE-PROTOCOLO EMITIDO", pagamentos: [{ data: "20/08/2025", valor: 150.00, desc: "Pagamento final" }], pagamentoEmAberto: null, materiais: [{ nome: "Guia do cliente", url: "#" } , { nome: "Contrato", url: "#" }] }

        };
        
        const loginScreen = document.getElementById('login-screen');
        const appLayout = document.getElementById('app-layout');
        const docInput = document.getElementById('docInput');
        const passwordInput = document.getElementById('passwordInput');
        const loginButton = document.getElementById('loginButton');
        const logoutButton = document.querySelector('.logout-button');
        
        loginButton.addEventListener('click', () => {
            const docNumber = docInput.value.replace(/\D/g, '');
            const password = passwordInput.value;
            const expectedPassword = docNumber.substring(0, 4);
            if (clientDatabase.hasOwnProperty(docNumber)) {
                if (password === expectedPassword) {
                    loginScreen.style.display = 'none';
                    appLayout.style.display = 'grid';
                    populateDashboard(clientDatabase[docNumber]);
                } else { document.getElementById('error-message').textContent = 'Senha incorreta.'; }
            } else { document.getElementById('error-message').textContent = 'Documento não encontrado.'; }
        });

        logoutButton.addEventListener('click', () => {
            appLayout.style.display = 'none';
            loginScreen.style.display = 'flex';
            docInput.value = '';
            passwordInput.value = '';
        });

        function populateDashboard(clientData) {
            document.getElementById('username-display').textContent = clientData.name.split(' ')[0];
            document.getElementById('user-avatar').src = `https://i.pravatar.cc/150?u=${docInput.value.replace(/\D/g, '')}`;
            
            const summaryContainer = document.querySelector('#dashboard-view .summary-cards');
            summaryContainer.innerHTML = `
                <div class="summary-card"><div class="icon"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div class="text"><h3>Status do Processo</h3><p>${clientData.status.replace(/-/g, ' ')}</p></div></div>
                <div class="summary-card"><div class="icon"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div><div class="text"><h3>Próxima Parcela</h3><p>${clientData.pagamentoEmAberto ? clientData.pagamentoEmAberto.vencimento : "Em dia"}</p></div></div>
                <div class="summary-card"><div class="icon"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v.01M12 6v-1.5M12 9.5v-1.5M12 15.5v-1.5M12 18v-1.5m-6-6.5v-1.5M6 9.5v-1.5M6 15.5v-1.5M18 9.5v-1.5M18 15.5v-1.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div class="text"><h3>Valor Pendente</h3><p>${clientData.pagamentoEmAberto ? `R$ ${clientData.pagamentoEmAberto.valor.toFixed(2)}` : "R$ 0,00"}</p></div></div>
                <div class="summary-card"><div class="icon"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg></div><div class="text"><h3>Materiais</h3><p>${clientData.materiais.length} Arquivos</p></div></div>`;

            const gridContainer = document.querySelector('#dashboard-view .dashboard-grid');
            const statusInfo = getStatusInfo(clientData.status);
            gridContainer.innerHTML = `
                <div class="dashboard-card"><h2>Andamento da Liminar</h2><div id="timeline-container"></div></div>
                <div class="dashboard-card"><h2>Situação Financeira</h2><div id="payments-container"></div></div>
                <div class="dashboard-card" style="grid-column: 1 / -1;"><h2>Meus Materiais</h2><ul id="materiais-list"></ul></div>`;
            
            document.getElementById('timeline-container').innerHTML = `<div class="timeline"><div id="progress-bar"></div><div class="step" id="step-1"><div class="step-icon">✔</div><div class="step-text">Envio</div></div><div class="step" id="step-2"><div class="step-icon">✔</div><div class="step-text">Liminar</div></div><div class="step" id="step-3"><div class="step-icon">✔</div><div class="step-text">Atualização</div></div><div class="step" id="step-4"><div class="step-icon">✔</div><div class="step-text">Finalizado</div></div></div><div id="status-message">${statusInfo.message}</div>`;
            updateTimeline(statusInfo.step);
            
            const paymentsContainer = document.getElementById('payments-container');
            let paymentsHTML = '<h4>Pagamentos Realizados</h4><table class="payments-table"><thead><tr><th>Descrição</th><th>Valor</th></tr></thead><tbody>';
            if(clientData.pagamentos.length > 0) clientData.pagamentos.forEach(p => { paymentsHTML += `<tr><td>${p.desc}</td><td>R$ ${p.valor.toFixed(2)}</td></tr>`; });
            else paymentsHTML += '<tr><td colspan="2">Nenhum pagamento realizado.</td></tr>'
            paymentsHTML += '</tbody></table>';

            paymentsHTML += '<h4 style="margin-top: 20px;">Pendentes</h4><table class="payments-table"><thead><tr><th>Descrição</th><th>Valor</th><th>Ação</th></tr></thead><tbody>';
            if(clientData.pagamentoEmAberto) {
                 const p = clientData.pagamentoEmAberto;
                 paymentsHTML += `<tr><td>${p.desc}</td><td>R$ ${p.valor.toFixed(2)}</td><td><button class="regularizar-btn" data-valor="${p.valor}">Regularizar</button></td></tr>`;
            } else {
                 paymentsHTML += `<tr><td colspan="3">Nenhuma pendência.</td></tr>`;
            }
            paymentsHTML += '</tbody></table>';
            paymentsContainer.innerHTML = paymentsHTML;
            
            if(clientData.pagamentoEmAberto) {
                document.querySelector('.regularizar-btn').addEventListener('click', function() {
                    showPixModal(this.getAttribute('data-valor'), clientData.name);
                });
            }

            const materiaisList = document.getElementById('materiais-list');
            materiaisList.innerHTML = '';
            if (clientData.materiais.length > 0) clientData.materiais.forEach(m => { materiaisList.innerHTML += `<li><a href="${m.url}" target="_blank">📄 ${m.nome}</a></li>`; });
            else materiaisList.innerHTML = '<li>Nenhum material disponível.</li>';
        }

        function getStatusInfo(statusName) { const statuses = { "EM TRANSIÇÃO DE ENVIO": { step: 1, message: "Sua documentação foi recebida e está na fila para análise judicial." }, "LIMINAR CONCEDIDA": { step: 2, message: "Decisão judicial favorável! Agora entra na fase de notificar os órgãos de crédito." }, "AGUARDANDO DECISÃO-ATUALIZAÇÃO": { step: 3, message: "Aguardando os órgãos de crédito cumprirem a decisão judicial." }, "RE-PROTOCOLO EMITIDO": { step: 3, message: "Documentação re-emitida e protocolada. Aguardando nova decisão." }, "PROCESSO FINALIZADO": { step: 4, message: "Parabéns! Seu processo foi concluído com sucesso." } }; return statuses[statusName] || { step: 0, message: "Status não encontrado." }; }
        function updateTimeline(currentStep) { const steps = document.querySelectorAll('.step'); const progressBar = document.getElementById('progress-bar'); if (!progressBar) return; const progressPercentage = currentStep > 1 ? ((currentStep - 1.5) / (steps.length - 2)) * 70 : 0; progressBar.style.width = progressPercentage + '%'; steps.forEach(step => { const stepNumber = parseInt(step.id.split('-')[1]); const icon = step.querySelector('.step-icon'); step.classList.remove('active', 'completed'); icon.classList.remove('active', 'completed'); if (stepNumber < currentStep) { step.classList.add('completed'); icon.classList.add('completed'); } else if (stepNumber === currentStep) { step.classList.add('active'); icon.classList.add('active'); } }); }
        
        document.querySelectorAll('.nav-link').forEach(link => { link.addEventListener('click', (e) => { e.preventDefault(); document.querySelectorAll('.nav-link').forEach(item => item.classList.remove('active')); link.classList.add('active'); document.querySelectorAll('.view-content').forEach(view => view.style.display = 'none'); const targetViewId = link.getAttribute('data-view'); document.getElementById(targetViewId).style.display = 'block'; document.getElementById('page-title').textContent = link.textContent.trim(); }); });
        
        const pixModal = document.getElementById('pix-modal');
        const closeBtn = document.querySelector('.close-btn');
        function showPixModal(valor, nomeCliente) { const payload = generatePixPayload("Contato.cobecode@gmail.com", "CMG Consultoria", valor, "SAO PAULO", "***"); document.getElementById('pix-copy-paste').value = payload; document.getElementById('qr-code-img').src = `https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=${encodeURIComponent(payload)}`; pixModal.style.display = 'flex'; }
        function generatePixPayload(chave, nome, valor, cidade, txid) { const p = [ '000201', '26' + ('0014BR.GOV.BCB.PIX01' + chave.length).padStart(2, '0') + chave, '52040000', '5303986', '54' + (parseFloat(valor).toFixed(2).length).padStart(2, '0') + parseFloat(valor).toFixed(2), '5802BR', '59' + (nome.substring(0,25).length).padStart(2, '0') + nome.substring(0,25), '60' + (cidade.length).padStart(2, '0') + cidade, '62' + (('05' + txid.length).padStart(2, '0') + txid).length.padStart(2, '0') + ('05' + txid.length).padStart(2, '0') + txid, '6304' ]; return p.join('') + 'A3C2'; }
        closeBtn.onclick = () => { pixModal.style.display = 'none'; };
        window.onclick = (event) => { if (event.target == pixModal) { pixModal.style.display = 'none'; } };

        docInput.addEventListener('input', () => { const v = docInput.value.replace(/\D/g, ''); if (v.length <= 11) { docInput.value = v.replace(/(\d{3})(\d)/, '$1.$2').replace(/(\d{3})(\d)/, '$1.$2').replace(/(\d{3})(\d{1,2})$/, '$1-$2'); } else { docInput.value = v.slice(0, 14).replace(/(\d{2})(\d)/, '$1.$2').replace(/(\d{3})(\d)/, '$1.$2').replace(/(\d{3})(\d)/, '$1/$2').replace(/(\d{4})(\d{1,2})$/, '$1-$2'); } });
    </script>
</body>
</html>